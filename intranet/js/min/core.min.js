
;var domEl,tempsNames,urlsApi;domEl={_agreement_page_content:"content-agreement-page-content",_agreement_page_content_name:"#content-agreement-page-content",_currency_h:".currency-h",_home_page_content:"content-welcome-page-content",_home_page_content_name:"#content-welcome-page-content",_home_page_header:"content-welcome-page-header",_home_page_header_name:"#content-welcome-page-header",_home_panel_perfil:"#panel_perfil",_home_panel_perfil_name:"panel_perfil",_home_today_aniversary:"#today_aniversary",_home_today_aniversary_name:"today_aniversary",_home_today_birthday:"#today_birthday",_home_today_birthday_name:"today_birthday",_home_widget_first_row:"content-welcome-widgets-first-row",_home_widget_first_row_name:"#content-welcome-widgets-first-row",_percentage_d:".percentage-d",_real_v:".real-v",div_hidden_inputs_session:"div#hidden-inputs-session",div_hidden_inputs_temporal:"div#hidden-inputs-temporal",div_recurrent:"div#content-temporal-interactive",go_section_agreement:"#go-section-agreement",go_section_home:"#go-section-home",input_session_usr_agn_header:"input#session-usr-agn-header",input_session_usr_agn_id:"input#session-usr-agn-id",input_session_usr_agn_logo1:"input#session-usr-agn-logo1",input_session_usr_agn_logo2:"input#session-usr-agn-logo2",input_session_usr_agn_name:"input#session-usr-agn-name",input_session_usr_email:"input#session-usr-email",input_session_usr_id:"input#session-usr-id",input_session_usr_type:"input#session-usr-type",recurrent_body:"body",recurrent_head:"head"},tempsNames={home_window_aniversary:"tmp_home_window_aniversary",home_window_birthday:"tmp_home_window_birthday",home_window_perfil:"tmp_home_window_perfil",recurrent_agreement_masonry_items:"tmp_agreement_masonry_items",recurrent_welcome_page_content:"tmp_welcome_page_content",recurrent_welcome_page_header:"tmp_welcome_page_header"},urlsApi={wse_get_epy:"../api/v1/webservice/get/empleados",wse_get_epy_age:"../api/v1/webservice/get/empleados/edades/",wse_get_epy_agn:"../api/v1/webservice/get/empleados/agencias/",wse_get_epy_ani:"../api/v1/webservice/get/empleados/aniversarios/",wse_get_epy_apm:"../api/v1/webservice/get/empleados/apellidos_maternos/",wse_get_epy_app:"../api/v1/webservice/get/empleados/apellidos_paternos/",wse_get_epy_are:"../api/v1/webservice/get/empleados/areas/",wse_get_epy_car:"../api/v1/webservice/get/empleados/cargos/",wse_get_epy_cor:"../api/v1/webservice/get/empleados/correos/",wse_get_epy_cty:"../api/v1/webservice/get/empleados/ciudades/",wse_get_epy_cum:"../api/v1/webservice/get/empleados/cumpleanos/",wse_get_epy_est:"../api/v1/webservice/get/empleados/estados/",wse_get_epy_fin:"../api/v1/webservice/get/empleados/fechas_ingreso/",wse_get_epy_mar:"../api/v1/webservice/get/empleados/marcas/",wse_get_epy_nag:"../api/v1/webservice/get/empleados/numeros_agencia/",wse_get_epy_nep:"../api/v1/webservice/get/empleados/numeros_empleado/",wse_get_epy_nom:"../api/v1/webservice/get/empleados/nombres/",wse_get_epy_tel:"../api/v1/webservice/get/empleados/telefonos/",wse_set_epy:"../api/v1/webservice/set/empleados"};
function validateEmail(e){return!0}function resetAlert(){alertify.set({labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok"})}var GLOBALUsrId=+$(domEl.input_session_usr_id).val(),GLOABALUsrType=+$(domEl.input_session_usr_type).val(),GLOBALUsrEmail=$(domEl.input_session_usr_email).val(),GLOBALUsrAgnId=+$(domEl.input_session_usr_agn_id).val(),GLOBALUsrAgnName=$(domEl.input_session_usr_agn_name).val(),GLOBALUsrAgnLogo1=$(domEl.input_session_usr_agn_logo1).val(),GLOBALUsrAgnLogo2=$(domEl.input_session_usr_agn_logo2).val(),GLOBALUsrAgnHeader=$(domEl.input_session_usr_agn_header).val(),section,today,IS_MOBILE=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),multipleSupport="undefined"!=typeof $("<input/>")[0].multiple,isIE=/msie/i.test(navigator.userAgent),inputValMetdods={isIntegerKP:function(e){return/\d/.test(String.fromCharCode(e.keyCode))}},animateNavMethod={animateNav:function(e){function n(e,n){var a,t;a=e.height(),t=e.css("height","auto").height(),e.height(a),e.stop().animate({height:t},parseInt(n))}var a,t,i;a=$(".dp-navlink-menu"),t=500,i=$(".dp-header .dp-top .dp-navlink"),0===a.height()?n(a,t):a.stop().animate({height:"0"},t)}},favicon={load_favicon:function(){favicon.change("img/ico/camcaricon.ico")},change:function(e,n){2==arguments.length&&(document.title=optionamDocTitle),this.addLink(e,"shortcur icon")},addLink:function(e,n){var a=document.createElement("link");a.type="image/x-icon",a.rel=n,a.href=e,this.removeLinkIfExists(n),this.docHead.appendChild(a)},removeLinkIfExists:function(e){for(var n=this.docHead.getElementsByTagName("link"),a=0;a<n.length;a++){var t=n[a];if("image/x-icon"==t.type&&t.rel==e)return void this.docHead.removeChild(t)}},docHead:document.getElementsByTagName("head")[0]},equalHeightsMethods={equalHeightsLoad:function(){var e=0;$(".equal-height").each(function(){$(this).height()>e&&(e=$(this).height())}),$(".equal-height").height(e)}},goSectionMethods={goSection_home:function(e){Finch.navigate("/")},goSection_agreement:function(e){Finch.navigate("/convenios")}},addStylesMethod={addStylesHome:function(){stylesHomeAttributes=[["link",{id:"content-add-style-welcome-plugins",rel:"stylesheet","class":"style-link-welcome",href:"../../css/styles/assets/plugins/chartist-js/chartist.css"},"",0],["link",{id:"content-add-style-welcome-plugins",rel:"stylesheet","class":"style-link-welcome",href:"../../css/styles/assets/plugins/aspieprogress/asPieProgress.css"},"",0],["link",{id:"content-add-style-welcome-dashboard",rel:"stylesheet","class":"style-link-welcome",href:"../../css/styles/assets/dashboard/v2.css"},"",0]],CAMIN.appendMulti(domEl.recurrent_head,stylesHomeAttributes),pluginsHomeAttributes=[["script",{id:"content-add-plugin-welcome-plugins","class":"plugin-link-welcome",src:"../../lib/assets/plugins/chartist-js/chartist.min.js"},"",0],["script",{id:"content-add-plugin-welcome-plugins","class":"plugin-link-welcome",src:"../../lib/assets/plugins/matchheight/jquery.matchHeight-min.js"},"",0]],CAMIN.appendMulti("div#plugins-for-this-section",pluginsHomeAttributes),scriptsHomeAttributes=[["script",{id:"content-add-plugin-welcome-scripts","class":"script-link-welcome",src:"../../lib/assets/plugins/chartist-js/chartist.min.js"},"",0],["script",{id:"content-add-plugin-welcome-scripts","class":"script-link-welcome",src:"../../lib/assets/run/components/matchheight.js"},"",0]],CAMIN.appendMulti("div#scripts-for-this-section",scriptsHomeAttributes)},addStylesAgreement:function(){stylesAgreementAttributes=[["link",{id:"content-add-style-welcome-agreement-pages",rel:"stylesheet","class":"style-link-welcome-agreement",href:"../../css/styles/assets/pages/advanced/masonry.css"},"",0]],CAMIN.appendMulti(domEl.recurrent_head,stylesAgreementAttributes),pluginsAgreementAttributes=[["script",{id:"content-add-plugin-welcome-agreement-plugins","class":"plugin-link-welcome-agreement",src:"../../lib/assets/plugins/masonry/masonry.pkgd.min.js"},"",1]],CAMIN.appendMulti("div#plugins-for-this-section",pluginsAgreementAttributes),scriptsAgreementAttributes=[["script",{id:"content-add-plugin-welcome-agreement-scripts","class":"script-link-welcome-agreement",src:"../../lib/assets/run/components/masonry.js"},"",1]],CAMIN.appendMulti("div#scripts-for-this-section",scriptsAgreementAttributes)}},cleanStylesMethod={cleanStylesWelcome:function(){$("head .style-link-welcome").remove(),$(".plugin-link-welcome").remove(),$(".script-link-welcome").remove()},cleanStylesAgreement:function(){$("head .style-link-welcome-agreement").remove(),$(".plugin-link-welcome-agreement").remove(),$(".script-link-welcome-agreement").remove()}},removeRecurrentsMethods={removeRecurrents:function(){cleanStylesMethod.cleanStylesWelcome(),cleanStylesMethod.cleanStylesAgreement(),removeRecurrentsMethods.removeRecurrents_home(),removeRecurrentsMethods.removeRecurrents_agreement()},removeRecurrents_home:function(){$(domEl._home_page_header_name).remove(),$(domEl._home_page_content_name).remove(),$(domEl.div_recurrent).removeClass("animsition")},removeRecurrents_agreement:function(){$(domEl._agreement_page_content_name).remove()}},viewSectionWelcomeHomeMethods={viewWelcomeHome:function(){viewSectionWelcomeHomeMethods.recurrent_welcome_home(),viewSectionWelcomeHomeMethods.loadTemplatesWelcomeHome(),equalHeightsMethods.equalHeightsLoad()},recurrent_welcome_home:function(){CAMIN.appendMulti(domEl.div_recurrent,[["div",{id:domEl._home_page_header,"class":"page-header height-300 margin-bottom-30"},"",!0],["div",{id:domEl._home_page_content,"class":"page-content container-fluid"},"",!0]]),CAMIN.appendMulti(domEl._home_page_content_name,[["div",{id:domEl._home_widget_first_row,"class":"row","data-plugin":"matchHeight","data-by-row":"true"},"",!0]]),CAMIN.appendMulti(domEl._home_widget_first_row_name,[["div",{id:domEl._home_panel_perfil_name,"class":"col-xlg-3 col-lg-4 col-md-12"},"",!0],["div",{id:domEl._home_today_birthday_name,"class":"col-lg-4 col-md-6 equal-height"},"",!0],["div",{id:domEl._home_today_aniversary_name,"class":"col-lg-4 col-md-6 equal-height"},"",!0]])},loadTemplatesWelcomeHome:function(){CAMIN.loadTemplate(tempsNames.recurrent_welcome_page_header,domEl._home_page_header_name),viewSectionWelcomeHomeMethods.globalUserPromise(),viewSectionWelcomeHomeMethods.loadTemplatesWindow_panelPerfil(),viewSectionWelcomeHomeMethods.loadTemplatesWindow_todayBirthday(),viewSectionWelcomeHomeMethods.loadTemplatesWindow_todayAniversary()},globalUserPromise:function(){(1===+GLOBALUsrId||2===+GLOBALUsrId||3===+GLOBALUsrId)&&(promise=CAMIN.postalService(urlsApi.wse_set_epy,{}),promise.success(function(e){}))},loadTemplatesWindow_panelPerfil:function(){CAMIN.loadTemplate(tempsNames.home_window_perfil,domEl._home_panel_perfil)},loadTemplatesWindow_todayBirthday:function(){today=moment().format().substring(0,10),dataBirthday=CAMIN.getInternalJSON(urlsApi.wse_get_epy_cum+today),CAMIN.loadTemplate(tempsNames.home_window_birthday,domEl._home_today_birthday,dataBirthday)},loadTemplatesWindow_todayAniversary:function(){today=moment().format().substring(0,10),dataAniversary=CAMIN.getInternalJSON(urlsApi.wse_get_epy_fin+today),CAMIN.loadTemplate(tempsNames.home_window_aniversary,domEl._home_today_aniversary,dataAniversary)}},viewSectionWelcomeAgreementMethods={viewSectionWelcomeAgreement:function(){viewSectionWelcomeAgreementMethods.recurrent_welcome_agreement(),viewSectionWelcomeAgreementMethods.loadTemplatesAgreement()},recurrent_welcome_agreement:function(){agreementPageContentAtributes=[["div",{id:domEl._agreement_page_content,"class":"page-content padding-30 blue-grey-500"},"",1]],CAMIN.appendMulti(domEl.div_recurrent,agreementPageContentAtributes),$(domEl.div_recurrent).addClass("animsition"),$(domEl.div_recurrent).attr("style","animation-duration: 0.8s; opacity: 1;")},loadTemplatesAgreement:function(){CAMIN.loadTemplate(tempsNames.recurrent_agreement_masonry_items,domEl._agreement_page_content_name)}};
var CAMIN={};CAMIN=function(){function e(e,n){return moment.lang(n),moment(e).format("dddd[,] LL")}function n(e,n){return moment.lang(n),moment(e,"YYYY-MM-DD hh:mm:ss").fromNow(!0)}function a(e,n,a){var t=Handlebars.templates[e];$(n).html(a?t(a):t)}function t(e){return $(e).val()}function i(e,n){$(e).val(n)}function s(e){return $(e).val()?!0:!1}function o(e){var n,a;n=$(e).val(),a=$.trim(n),$(e).val(a)}function r(e){return $(e).html()}function l(e,n){$(e).html(n)}function d(e){var n,a;n=$(e).val(),a=hex_sha512(n),$(e).val(a)}function c(e,n,a,t,i){var s;s="<"+n;for(var o in a)s+=a.hasOwnProperty(o)?" "+o+"='"+a[o]+"'":"";i?(s+=">",s+=t,s+="</"+n+">"):(s+=" >",s+=t),$(e).append(s)}function m(e,n){for(var a=0;a<n.length;a++)c(e,n[a][0],n[a][1],n[a][2],n[a][3])}function p(e,n,a){var t,i,s,o,r,l;t=new Date,i=new Date(t),i.setDate(t.getDate()+n),s=i.getFullYear(),o=+i.getMonth(),o+=1,r=i.getDate(),l=s+"-"+o+"-"+r,$(e).datetimepicker({pickTime:!1}),a?($(e).data("DateTimePicker").setMinDate(i),$(e).data("DateTimePicker").setDate(l)):$(e).data("DateTimePicker").setDate(l)}function u(e,n){var a;return a=_.size(_.compact(_.pick(e,n))),a===n.length?!0:!1}function g(e,n){var a;return a=_.size(_.compact(_.pick(e,n))),a?!1:!0}function v(e){$(e).each(function(){this.reset()})}function h(e,n){return $.ajax({type:"POST",contentType:"application/json",url:e,dataType:"json",data:JSON.stringify(n)})}function f(e){var n;return n=function(){var n=null;return $.ajax({async:!1,global:!1,url:e,dataType:"json"}).done(function(e){n=e}),n}()}function y(e,n,a,t){return _.filter(_.pluck(e,n),function(e){return t?e===a:e!==a})}function w(e,n){return _.reduce(_.pluck(e,n),function(e,n){return e+n})}function b(e,n){var a,t;a=[],t=_.pairs(n);for(var i=0;i<e.length;i++)for(a[i]={},j=0;j<t.length;j++)a[i][t[j][0]]=e[i][t[j][1]];return a}function M(e,n){var a,t;do a=e.length,e=_.without(e,_.findWhere(e,n)),t=e.length;while(a!==t);return e}function A(e,n){pairs=_.pairs(n),withoutArrayObj=[];for(var a=0;a<pairs.length;a++)withoutArrayObj[a]=new Object,withoutArrayObj[a][pairs[a][0]]=pairs[a][1];for(a=0;a<withoutArrayObj.length;a++)e=M(e,withoutArrayObj[a]);return e}function E(e){var n;return n=accounting.formatMoney(e)}function k(e){for(var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",a=4,t="",i=0;a>i;i++){var s=Math.floor(Math.random()*n.length);t+=n.substring(s,s+1)}$(e).val(t)}return moment.lang("es",{months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"ene._feb._mar_abr._may_jun_jul._ago_sep._oct._nov._dic.".split("_"),weekdays:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),weekdaysShort:"dom._lun._mar._mier._juev._vie._sab.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Hoy a las] LT",nextDay:"[Mañanaalas]LT",nextWeek:"dddd[a]LT",lastDay:"[Ayera]LT",lastWeek:"dddd[hasta]LT",sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d dias",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(e){returnnumber+(1===e?"er":"a")},week:{dow:1,doy:6}}),{momentToHuman:n,momentToRoman:e,loadTemplate:a,getValue:t,setValue:i,exist:s,getHTML:r,setHTML:l,appendOne:c,appendMulti:m,trimValue:o,cryptElement:d,setDateTPCalendar:p,validFormFull:u,validFormEmpty:g,resetForm:v,postalService:h,getInternalJSON:f,filterArrayObjByKey:y,sumArrayObjByKey:w,renameArrayObjKeys:b,withoutArrayObjAND:M,withoutArrayObjOR:A,currencyFormat:E,randomString:k}}();
Finch.route("/",{setup:function(e){window.onload=favicon.load_favicon(),section="intranet-welcome",Breakpoints(),Site.run(),addStylesMethod.addStylesHome()},load:function(e){viewSectionWelcomeHomeMethods.viewWelcomeHome()},unload:function(e){section="",CAMIN.setHTML(domEl.div_recurren,""),removeRecurrentsMethods.removeRecurrents()}}),Finch.route("/convenios",{setup:function(e){window.onload=favicon.load_favicon(),section="intranet-welcome-agreement",Breakpoints(),Site.run(),addStylesMethod.addStylesAgreement()},load:function(e){viewSectionWelcomeAgreementMethods.viewSectionWelcomeAgreement()},unload:function(e){section="",CAMIN.setHTML(domEl.div_recurren,""),removeRecurrentsMethods.removeRecurrents()}}),Finch.listen();
$(document).ready(function(){$.fn.serializeFormJSON=function(){var e={},n=this.serializeArray();return $.each(n,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},Number.prototype.format=function(e,n){var a="(\\d)(?=(\\d{"+(n||3)+"}) + "+(e>0?"\\.":"$")+")";return this.toFixed(Math.max(0,~~e)).replace(new RegExp(a,"g"),"$1,")},$(domEl.recurrent_body).on("click",domEl.dropdown_animate_nav_header,animateNavMethod.animateNav),$(domEl.recurrent_body).on("click",domEl.go_section_home,goSectionMethods.goSection_home),$(domEl.recurrent_body).on("click",domEl.go_section_agreement,goSectionMethods.goSection_agreement)});
